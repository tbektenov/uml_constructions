<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" th:href="@{/css/core.css}">
    <link rel="stylesheet" th:href="@{/css/sidebar.css}">
    <link rel="stylesheet" th:href="@{/css/home.css}">
    <link rel="stylesheet" th:href="@{/css/makeApp.css}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" integrity="SHA-512-новая_контрольная_сумма" crossorigin="anonymous">
    <title>Hospital</title>
</head>
<body>
<div class="sidebar">
    <div class="sidebar_inner">
        <nav class="logo">
            <a th:href="@{/home}"><img th:src="@{/img/logo.png}" alt="logo"></a>
        </nav>
        <nav class="sections">
            <div class="section" id="home">
                <a class="navlink" th:href="@{/home}">Home</a>
            </div>
            <div class="section">
                <a class="navlink" th:href="@{/hospitals}">Hospitals</a>
            </div>
            <div class="section">
                <div onclick="toggleSubmenu()" class="navlink" id="medical-activities">
                    <div class="activity">
                        <p>Medical activities</p>
                        <i class="fa fa-chevron-right" id="chevron"></i>
                    </div>
                </div>
                <div class="submenu" id="submenu">
                    <div class="subsection">
                        <a class="navlink" th:href="@{/appointments}">Appointments</a>
                    </div>
                    <div class="subsection">
                        <a class="navlink" th:href="@{/hospitalizations}">Hospitalizations</a>
                    </div>
                </div>
            </div>
            <div class="section">
                <a class="navlink" href="#">Contacts</a>
            </div>
            <div class="section">
                <a class="navlink" href="#">About</a>
            </div>
            <div class="section_exit">
                <a class="navlink_exit"><i class="fa fa-arrow-right"></i></a>
            </div>
        </nav>
    </div>
</div>

<div class="home">
    <div class="home_inner">
        <div class="user">
            <img th:src="@{/img/user.png}" alt="user">
        </div>
        <div class="hello">
            <h1>Hello, <span th:text="${name}">User</span></h1>
        </div>
        <div class="table_text">
            <h2>Upcoming appointments</h2>
            <div class="tableContainer">
                <table class="table">
                    <thead>
                    <tr>
                        <th>Doctor</th>
                        <th>Location</th>
                        <th>Date</th>
                    </tr>
                    </thead>
                    <tbody id="appointment-table-body">
                    <!-- Table content will be dynamically loaded by JS or server-side rendered using Thymeleaf -->
                    </tbody>
                </table>
            </div>
            <div class="pagination" id="pagination">
                <!-- Pagination will be dynamically added by JS or server-side rendered using Thymeleaf -->
            </div>
        </div>
    </div>
</div>

<div class="make">
    <div class="make_inner">
        <div class="make_app" id="openModalButton">
            <img th:src="@{/img/pencil.png}" alt="button_to_make_app">
        </div>
    </div>
</div>

<div id="modal" class="modal">
    <div class="modal-content">
        <span class="close">&times;</span>
        <h2>Make an appointment</h2>
        <form th:action="@{/make-appointment}" method="post">
            <div class="section">
                <label for="doctor">Doctor</label>
                <select id="doctor" name="doctor" required>
                    <option value="" disabled selected>Select a Specialist</option>
                    <option th:each="doctor : ${doctors}" th:value="${doctor.id}" th:text="${doctor.name}"></option>
                </select>
            </div>
            <div class="section">
                <label for="hospital">Hospital</label>
                <select id="hospital" name="hospital" required>
                    <option value="" disabled selected>Select a Hospital</option>
                    <option th:each="hospital : ${hospitals}" th:value="${hospital.id}" th:text="${hospital.name}"></option>
                </select>
            </div>
            <div class="section">
                <label for="date">Date</label>
                <input type="date" id="date" name="date" required>
            </div>
            <div class="btn">
                <button type="submit" class="subsection">Search</button>
            </div>
        </form>
    </div>
</div>

</body>
<script>
    function toggleSubmenu() {
        const submenu = document.getElementById('submenu');
        const chevron = document.getElementById('chevron');
        submenu.style.display = submenu.style.display === 'block' ? 'none' : 'block';
        chevron.classList.toggle('rotated');
    }
</script>
<script th:src="@{/js/home.js}"></script>
<script th:src="@{/js/makeApp.js}"></script>
</html>
